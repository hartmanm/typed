<!DOCTYPE html>
<!--
Copyright (c) 2021 Michael Neill Hartman. All rights reserved.
mnh_license@proton.me
https://github.com/hartmanm
-->
<html lang="en">
<head>
<title>typed</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=0.75">
<style>
.header{padding: 0px; text-align: center; color: #9d9d9d; background-color: #101010;}
div{justify-items: center; overflow:hidden; width:100%;padding: 0px 0px;}
body{background:#101010;}
intro{text-align: left; color: #9d9d9d;}
h1{margin-left: 40px; margin-right:40px;; text-align: left; color: #9d9d9d;}
h3{padding: 20px 100px; margin-left: auto; margin-right:auto; text-align: center; color: #9d9d9d;}
text{margin-left: auto; margin-right:auto; text-align: center; color: #9d9d9d};
</style>
</head>
<body>
<intro id=repeat></intro>
<intro id=info></intro>
<h1 id=basis></h1>
</div>
<script>
const info ="A vanilla js DOM metaprogramming implementation";
// globals
// the speed characters are output at
var typing_speed=18
// seconds to hold message before clearing
var time_to_hold_before_clearing=0
// larger is faster accelerates the speed characters are output at
// no smaller than 1; 1 is no acceleration
var accelerator=2
// frequency at which output is updated in milliseconds
var update_timeout_frequency=20

const input_text=`
SOFTWARE LICENSE AGREEMENT

IMPORTANT: READ THIS AGREEMENT CAREFULLY BEFORE USING THE SOFTWARE.

This Software License Agreement ("Agreement") is made between Michael Neill Hartman ("Licensor") and you ("Licensee"). By installing, copying, or using the software, methods, or architecture ("Software") in whole or part, Licensee agrees to be bound by the terms of this Agreement.

1. Grant of License
Licensor grants Licensee a non-exclusive, non-transferable license to use the Software solely for personal purposes on a single machine, provided that all such use is in accordance with this entire license agreement and includes the attribution:
[https://github.com/hartmanm/mnh_license/blob/main/attribution.md](https://github.com/hartmanm/mnh_license/blob/main/attribution.md)
The attribution may be modified at any time, and Licensee is required to update their attribution accordingly.

2. Commercial, Educational, and Government Use
Licensee acknowledges that any commercial, educational, or government use of the Software is prohibited without a separately negotiated license. If Licensee wishes to use the Software for any of these purposes, Licensee must contact Licensor to negotiate a separate license agreement.

3. Violation Reporting and Reward
Individuals who notify the Licensor in writing of a specific violation of this Agreement may be eligible for a reward of up to 10% of any successful legal settlement resulting from that violation, calculated after taxes. The written notice must provide sufficient details about the violation, and the individual must be the first to provide this information. If multiple individuals submit information that collectively enables a successful legal settlement, the Licensor shall, at their sole discretion, determine the division of the 10% reward.

4. Listing of  Commercial, Educational, and Government Licensees
All existing commercial, educational and government licensees are listed at the following resource:
[https://github.com/hartmanm/mnh_license/blob/main/commercial_educational_and_government_licensees.md](https://github.com/hartmanm/mnh_license/blob/main/commercial_educational_and_government_licensees.md)
Any commercial, educational, or government licensee must agree to be listed at this resource for verification purposes.

5. License Violations
If a commercial, educational or government licensee is found to be in violation of this Agreement by the Licensor, they agree that their information may be added to a violations resource at:
[https://github.com/hartmanm/mnh_license/blob/main/license_violations.md](https://github.com/hartmanm/mnh_license/blob/main/license_violations.md)

6. Methods and Architecture
The Software may include specific methods, processes, and architectural designs. Licensee acknowledges that these elements are proprietary to the Licensor and agrees not to replicate, distribute, or otherwise use the methods or architecture in whole or part outside the scope of this Agreement.

7. Restrictions
Licensee shall not:
Modify, translate, distribute, rent, lease, or sell the Software.
Use the Software on more than one physical machine.
Use the Software in more than one virtual machine or container.
Use the Software for any unlawful purpose.

8. Ownership
The Software is licensed, not sold. Licensor retains all rights, title, and interest in the Software, including all intellectual property rights.

9. Modification of License
Licensor may modify this license at any time, unless specifically restricted by a separate license agreement.

10. Termination
This Agreement is effective until terminated. Licensee may terminate this Agreement at any time by destroying all copies of the Software. Licensor may terminate this Agreement at any time. Upon termination, Licensee must cease all use of the Software and destroy all copies.

11. Disclaimer of Warranty
The Software is provided "as is," without warranty of any kind, express or implied. Licensor does not warrant that the Software will meet Licensee's requirements or that its operation will be uninterrupted or error-free.

12. Limitation of Liability
In no event shall Licensor be liable for any damages arising from the use of or inability to use the Software, even if Licensor has been advised of the possibility of such damages.

13. Contact Information
The contact information for this Agreement be modified at any time by the Licensor by the modification of the resource:
[https://github.com/hartmanm/mnh_license/blob/main/contact_information.md](https://github.com/hartmanm/mnh_license/blob/main/contact_information.md)

14. Forking
Licensee acknowledges that anyone can fork the Software on [https://github.com](https://github.com) 
Forking creates a copy of the Software to which this Agreement applies. This License shall be included in and applied to any forked versions of the Software.

15. Entire Agreement
This Agreement constitutes the entire agreement between the parties regarding the Software and supersedes all prior agreements and understandings, unless specifically restricted by a separate license agreement listed in:
[https://github.com/hartmanm/mnh_license/blob/main/commercial_educational_and_government_licensees.md](https://github.com/hartmanm/mnh_license/blob/main/commercial_educational_and_government_licensees.md)
By installing, copying, or using the software, methods, or architecture ("Software") in whole or part, Licensee acknowledges that they have read, understood, and agreed to be bound by the terms of this Agreement.
`
function reload(){location.reload();}
function repeat(){
var main=document.getElementById("repeat");
main.innerHTML = "repeat typed";
main.id;
main.addEventListener("mouseover", function(e){var target = e.target || e.srcElement; hover(main.id)}, 
false);
main.addEventListener("mouseleave", function(e){var target = e.target || e.srcElement; leave(main.id)}, 
false);
main.addEventListener("click", function(e){var target = e.target || e.srcElement; reload()}, false);
}
repeat();
function display_info(){
var main=document.getElementById("info");
main.innerHTML = "(i)";
main.id;
main.addEventListener("mouseover", function(e){var target = e.target || e.srcElement; load_tooltip()}, 
false);
main.addEventListener("mouseleave", function(e){var target = e.target || e.srcElement; 
clear_tooltip(main.id)}, false);
}
display_info();
function load_tooltip(){
var main=document.getElementById("info");
main.style = "z-index: 1; font-size: 100%; outline-style: solid; color: rgb(119, 0, 255); outline-color: #FEFF4D; cursor: pointer;";
var one = document.createElement("h3");
one.id = "info_tip";
one.innerHTML = info;
main.appendChild(one);
}
function clear_tooltip(){
var main= document.getElementById("info");
while(main.firstChild){main.removeChild(main.firstChild);}
main.innerHTML = "(i)";
main.style = "z-index: 2;transform: scale(1);font-size: 100%; ";
}
function hover(id){
var out = document.getElementById(id);
out.style = "z-index: 1; font-size: 100%; outline-style: solid; color: rgb(119, 0, 255); outline-color: #FEFF4D; cursor: pointer;";
}
function leave(id){
var out = document.getElementById(id);
out.style = "z-index: 2;transform: scale(1);font-size: 100%; ";
}
function create_h4(parent,innerhtml,id){
var one = document.createElement("h4");
one.innerHTML = innerhtml;
one.id=id;
parent.appendChild(one);
}
function append_h4(parent,innerhtml,id){
var one = document.getElementById(id)
one.innerHTML = innerhtml;
}
function wipe_h4(parent,id,clear_typing_callback){
var one = document.getElementById(id);
one.innerHTML = "";
one.id=id;
clearInterval(clear_typing_callback);
}
function update_text(display_text,display_text_length,typing_callback){
var d = new Date();
var s = d.getTime();
var now = (s-start)/1000
var the_count=now*typing_speed*accelerator // gets faster over time if accelerator > 1
var text_iterator=0;
var output_text=""
for(var key of display_text){
if(the_count > text_iterator){
output_text+=key
} // if(the_count > text_iterator){
text_iterator++
} // for(var key of display_text){
append_h4(intro_dom,output_text,"intro1")
if(the_count > display_text_length){
clearInterval(typing_callback);
} // if(the_count > display_text_length){
} // update_text()
function initialize_output(){
var intro_dom = document.getElementById("basis");
intro_dom.innerHTML="";
create_h4(intro_dom,"","intro1")
}
function get_next_line(main_loop_callback){
display_iterator++
if(display_iterator < input_text_array_length){
output_line=""
var dd = new Date();
var ss = dd.getTime();
start=ss
output_line=input_text_array[display_iterator]
while(output_line==""){
display_iterator++
output_line=input_text_array[display_iterator]
} // while(output_line==""){
if(main_loop_callback){clearInterval(main_loop_callback);
}
if(output_line!=undefined){output();}
} // if(display_iterator < input_text_array_length){
}
function output(){
var display_text=output_line
var text_to_type= Array.from(display_text);
var display_text_length=text_to_type.length;
var main_loop_duration=(display_text_length*100)+(time_to_hold_before_clearing*1000)+1000
var main_loop = setInterval(() => {get_next_line(main_loop);}, main_loop_duration);
var typing = setInterval(() => {update_text(text_to_type,display_text_length,typing);}, 
update_timeout_frequency);
var clear_typing_duration=(display_text_length*100)+(time_to_hold_before_clearing*1000)
var clear_typing = setInterval(() => {wipe_h4(intro_dom,"intro1",clear_typing);}, 
clear_typing_duration);
}
// initialize variables
if(accelerator<1){accelerator=1}
console.log("typed settings:\n"+"typing_speed: "+typing_speed+"\n"+"time_to_hold_before_clearing: "+time_to_hold_before_clearing+"\n"+"accelerator: "+accelerator+"\n"+"update_frequency: "+update_frequency+"\n");
process_text=`
`
process_text+=input_text
// split multiline string into an array of strings
let splitLines = str => str.split(/\r?\n/);
// run splitLines to generate input_text_array
var input_text_array=splitLines(process_text);
var input_text_array_length=input_text_array.length
// create accessor var
var intro_dom = document.getElementById("basis");
var display_iterator=0
var hold=false
var output_line=""
var start=0
time_to_hold_before_clearing+=2
// kick off processing 
initialize_output();
get_next_line();
</script>
</body>
</html>
